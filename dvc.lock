schema: '2.0'
stages:
  featurize:
    cmd: python3 src/featurize.py data/raw data/featurize
    deps:
    - path: data/raw
      md5: 9d3d74e16f896a88df4f97f9755bb4b0.dir
      size: 305179520
      nfiles: 5
    - path: src/featurize.py
      md5: c94a3fff61a5c2f572b027ce9c6d07c0
      size: 2022
    params:
      params.yaml:
        featurize.max_row_limit: 1000000
        featurize.window_size: 8
    outs:
    - path: data/featurize
      md5: 96dc364478248eea5f36cdb343cb0863.dir
      size: 83232709
      nfiles: 1
  train:
    cmd: python3 src/train.py data/featurize data/predictions
    deps:
    - path: data/featurize
      md5: 96dc364478248eea5f36cdb343cb0863.dir
      size: 83232709
      nfiles: 1
    - path: src/model.py
      md5: 0a0a875a220d1fd11ade13d1bd17a70a
      size: 3813
    - path: src/train.py
      md5: d68462cb39b33c5a710742d12dfe3b10
      size: 2271
    params:
      params.yaml:
        featurize.window_size: 8
        train.batch_size: 10000
        train.epochs: 100
        train.hidden_size: 20
        train.s1: 3
        train.s2: 5
    outs:
    - path: data/predictions
      md5: 24df9f6259f9948f37135d7c74ad46bf.dir
      size: 1378437
      nfiles: 1
  validate:
    cmd: python3 src/validate.py data/featurize data/predictions metrics.json
    deps:
    - path: data/featurize
      md5: 96dc364478248eea5f36cdb343cb0863.dir
      size: 83232709
      nfiles: 1
    - path: data/predictions
      md5: 24df9f6259f9948f37135d7c74ad46bf.dir
      size: 1378437
      nfiles: 1
    - path: src/validate.py
      md5: 313ee87dc6cd76edf73d77ea95526f44
      size: 2147
    params:
      params.yaml:
        featurize.window_size: 8
    outs:
    - path: metrics.json
      md5: 03769f403f83e9a997f945b815d5224c
      size: 92
